<!-- ✅ Si es DELETE, usa una única modal genérica -->
@if (showInlineDelete) {
<app-modal-delete
  [item]="deleteCandidate"
  [typeModal]="TypeList.Events"
  (confirmDelete)="onConfirmDeleteEvent($event)"
  (closeModal)="onCancelDelete()"
/>
} @if (action === TypeActionModal.Delete) {
<app-modal-delete
  [item]="item"
  [typeModal]="typeModal"
  (confirmDelete)="onConfirmDelete($event)"
  (closeModal)="onClose()"
/>

} @else { @switch (typeModal) {

<!-- BOOKS -->
@case (TypeList.Books) { @if (action === TypeActionModal.Show) {
<app-modal-show-book [item]="item" [isDashboard]="isDashboard" />
} @else {
<app-form-book
  [itemId]="item?.id"
  [item]="item"
  (submitForm)="sendFormBookData.emit($event)"
/>
} }

<!-- EVENTS -->
@case (TypeList.Events) { @if (action === TypeActionModal.Show) {
<!-- 👁 Mostrar detalle SOLO cuando item exista -->
@if (item; as ev) {
<app-modal-show-event
  [item]="ev"
  [isDashboard]="isDashboard"
  (openMacroevent)="openMacroevent.emit($event)"
/>
} @else {
<div class="p-6 flex items-center justify-center min-h-[200px]">
  <app-spinner-loading />
</div>
} } @else if (action === TypeActionModal.Create) {
<!-- 🟢 Crear evento sin depender de item -->
<app-form-event
  [itemId]="0"
  [item]="null"
  (submitForm)="sendFormEventData.emit($event)"
/>
} @else {
<!-- ✏️ Editar o duplicar, requiere item -->
@if (item; as ev) {
<app-form-event
  [itemId]="action === TypeActionModal.Duplicate ? 0 : ev?.id ?? 0"
  [item]="ev"
  (submitForm)="sendFormEventData.emit($event)"
/>
} @else {
<!-- ⏳ Mostrar spinner solo mientras se carga el item -->
<div class="p-6 flex items-center justify-center min-h-[200px]">
  <app-spinner-loading />
</div>
} } }
<!-- EVENTS REPORTS -->
@case (TypeList.EventsReports) {
<app-form-event-report
  [eventId]="item?.id"
  [itemId]="item?.id"
  [action]="action"
  (submitForm)="sendFormEventReportData.emit($event)"
/>
}
<!-- MACROEVENTS -->
@case (TypeList.Macroevents) { @if (action === TypeActionModal.Show) {
<app-modal-show-macroevent
  [item]="item"
  [isDashboard]="isDashboard"
  (openEvent)="onOpenEventFromFather($event)"
/>
} @else {
<app-form-macroevent
  [itemId]="item?.id"
  [item]="item"
  (submitForm)="sendFormMacroeventData.emit($event)"
/>
} }
<!-- MULTIEVENTS -->
@case ( TypeList.MultiEvents) {
<app-modal-multievent
  [events]="item?.events ?? item"
  [date]="item?.date ?? null"
  [isDashboard]="isDashboard"
  (openEvent)="onOpenEventFromFather($event)"
  (remove)="removeEvent.emit($event)"
  (view)="viewEvent.emit($event)"
  (edit)="editEvent.emit($event)"
  (addEvent)="addEvent.emit($event)"
  (close)="onClose()"
/>
}
<!-- MOVIES -->
@case (TypeList.Movies) { @if (action === TypeActionModal.Show) {
<app-modal-show-movie
  [item]="item"
  [isDashboard]="isDashboard"
  (close)="onClose()"
/>
} @else {
<app-form-movie
  [itemId]="item?.id"
  [item]="item"
  (submitForm)="sendFormMovieData.emit($event)"
/>
} }

<!-- RECIPES -->
@case (TypeList.Recipes) { @if (action === TypeActionModal.Show) {
<app-modal-show-recipe [item]="item" [isDashboard]="isDashboard" />
} @else {
<app-form-recipe
  [itemId]="item?.id"
  [item]="item"
  (submitForm)="sendFormRecipeData.emit($event)"
/>
} }

<!-- PITERAS -->
@case (TypeList.Piteras) { @if (action === TypeActionModal.Show) {
<app-modal-show-pitera
  [item]="item"
  [isDashboard]="isDashboard"
  (openPdfReq)="onOpenPdf($event)"
/>
} @else {
<app-form-pitera
  [itemId]="item?.id"
  [item]="item"
  (submitForm)="sendFormPiteraData.emit($event)"
/>
} }

<!-- INVOICES -->
@case (TypeList.Invoices) { @if (action === TypeActionModal.Show) {
<app-modal-show-invoice [item]="item" (openPdfReq)="onOpenPdf($event)" />
} @else {
<app-form-invoice
  [itemId]="item?.id"
  [item]="item"
  (submitForm)="sendFormInvoiceData.emit($event)"
/>
} }

<!-- SUBSIDIES -->
@case (TypeList.Subsidies) { @if (action === TypeActionModal.Show) {
<app-modal-show-subsidy
  [item]="item"
  (openInvoice)="onOpenInvoiceFromFather($event)"
  (openProject)="onOpenProjectFromFather($event)"
/>
} @else {
<app-form-subsidy
  [itemId]="item?.id"
  [item]="item"
  (submitForm)="sendFormSubsidyData.emit($event)"
/>
} }

<!-- CREDITORS -->
@case (TypeList.Creditors) { @if (action === TypeActionModal.Show) {
<app-modal-show-creditor
  [item]="item"
  (openInvoice)="onOpenInvoiceFromFather($event)"
/>
} @else {
<app-form-creditor
  [itemId]="item?.id"
  [item]="item"
  (submitForm)="sendFormCreditorData.emit($event)"
/>
} }

<!-- AGENTS -->
@case (TypeList.Agents) { @if (action === TypeActionModal.Show) {
<app-modal-show-agent
  [item]="item"
  (openEvent)="onOpenEventFromFather($event)"
/>
} @else {
<app-form-agent
  [itemId]="item?.id"
  [item]="item"
  (submitForm)="sendFormAgentData.emit($event)"
/>
} }

<!-- PLACES -->
@case (TypeList.Places) { @if (action === TypeActionModal.Show) {
<app-modal-show-place [item]="item" />
} @else {
<app-form-place
  [itemId]="item?.id"
  [item]="item"
  (submitForm)="sendFormPlaceData.emit($event)"
/>
} }

<!-- PODCASTS -->
@case (TypeList.Podcasts) { @if (action === TypeActionModal.Show) {
<app-modal-show-podcast [item]="item" [isDashboard]="isDashboard" />
} @else {
<app-form-podcast
  [itemId]="item?.id"
  [item]="item"
  (submitForm)="sendFormPodcastData.emit($event)"
/>
} }

<!-- ARTICLES -->
@case (TypeList.Articles) { @if (action === TypeActionModal.Show) {
<app-modal-show-article [item]="item" [isDashboard]="isDashboard" />
} @else {
<app-form-article
  [itemId]="item?.id"
  [item]="item"
  (submitForm)="sendFormArticleData.emit($event)"
/>
} }

<!-- PROJECTS -->
@case (TypeList.Projects) { @if (action === TypeActionModal.Show) {
<app-modal-show-project
  [item]="item"
  (openEvent)="onOpenEventFromFather($event)"
  (openInvoice)="onOpenInvoiceFromFather($event)"
/>
} @else {
<app-form-project
  [itemId]="item?.id"
  [item]="item"
  (submitForm)="sendFormProjectData.emit($event)"
/>
} }

<!-- PARTNERS -->
@case (TypeList.Partners) { @if (action === TypeActionModal.Show) {
<app-modal-show-partner [item]="item" /> } @else {
<app-form-partner
  [itemId]="item?.id"
  [item]="item"
  (submitForm)="sendFormPartnerData.emit($event)"
/>
} } @default {
<div class="p-6 text-center text-gray-500">
  Tipo de modal no soportado o no configurado.
</div>
} } }
