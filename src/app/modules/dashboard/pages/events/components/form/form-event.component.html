<div class="flex flex-col">
  <div class="text-center pb-5 uppercase">
    <p class="text-2xl">{{ titleForm }}</p>
  </div>
  @if (isLoading) {
  <div class="spinner-container">
    <app-spinner-loading />
  </div>
  } @else {
  <form
    (ngSubmit)="onSendFormEvent()"
    [formGroup]="formEvent"
    class="login-auth-form"
  >
    <div class="flex flex-col gap-y-4">
      <div class="flex justify-between gap-x-8 h-[420px]">
        <div class="flex flex-col flex-1 gap-y-4">
          <div class="box-input gap-x-4">
            <label for="title">T√≠tulo</label>
            <div class="flex flex-col flex-1">
              <input
                formControlName="title"
                placeholder="T√≠tulo del evento"
                type="text"
                [ngClass]="{
                  'is-invalid': submitted && formEvent.get('title')?.invalid
                }"
              />
              @if (submitted && formEvent.get('title')?.invalid) {
              <div class="is-invalid-text">Campo requerido</div>
              }
            </div>
          </div>

          <div class="box-input gap-x-4 flex-1 !items-start">
            <label for="description">Descripci√≥n</label>
            <quill-editor
              formControlName="description"
              [modules]="quillModules"
              placeholder="Escribe aqu√≠ la descripci√≥n..."
              class="ql-container-large text-sm focus:outline-none focus:ring focus:ring-blue-200 w-full"
            />
          </div>
        </div>
        <div class="w-72">
          <app-image-control
            [previewImg]="
              formEvent.get('img')?.value ? formEvent.get('img')?.value! : null
            "
            [entityId]="itemId"
            [type]="typeList"
            (imgSelected)="onImageSelected($event)"
            [imageWidthValue]="'full'"
            [imageHeightValue]="410"
            [textImg]="'A√±adir cartel'"
            class="w-full"
          ></app-image-control>
        </div>
      </div>
      <!-- FECHA -->
      <div
        class="border-2 pt-2 px-4 pb-6 mb-6"
        [ngClass]="{
  'border-[red]': submitted && (
    !isTypePeriodSelected ||
    formEvent.errors?.['periodicNeedsAtLeastTwoDates'] ||
    formEvent.errors?.['invalidDateRange'] ||
    formEvent.errors?.['invalidTimeRange'] ||
    repeatedDates.errors?.['duplicateStartDatesAndTimes'] ||
    formEvent.get('start')?.invalid || formEvent.get('start')?.errors?.['minDate']||
    formEvent.get('start')?.invalid || formEvent.get('start')?.errors?.['maxDate']||
    formEvent.get('end')?.invalid || formEvent.get('start')?.errors?.['minDate']||
    formEvent.get('end')?.invalid || formEvent.get('start')?.errors?.['maxDate']

  )
}"
      >
        <h2 class="font-bold text-lilaText mt-4 uppercase">Tipo de evento</h2>
        <div class="flex justify-center gap-x-4 py-2">
          <app-button-select
            [buttonText]="'Evento individual'"
            subText="Para eventos que ocurren una vez"
            [active]="eventTypePeriod === 'single'"
            (addClicked)="setEventTypePeriod('single')"
            iconClass="uil-calender"
          >
          </app-button-select>

          <app-button-select
            [buttonText]="'Evento recurrente'"
            subText="Se repite en varias ocasiones"
            [active]="eventTypePeriod === 'periodic'"
            (addClicked)="setEventTypePeriod('periodic')"
            iconClass="uil-calendar-alt"
          >
          </app-button-select>
        </div>
        @if(submitted && !isTypePeriodSelected){
        <div class="flex justify-center gap-x-4 py-2">
          <p class="text-[red] text-[11px]">Debes seleccionar una opci√≥n</p>
        </div>
        }
        <!-- Pase √∫nico -->
        @if (eventTypePeriod === 'single') {
        <div class="pt-4 px-4">
          <p class="text-[15px] text-center mb-10 text-lilaText px-4">
            Si el evento es de un solo d√≠a, no es necesario indicar una fecha de
            fin. Adem√°s, si no se especifica la hora de finalizaci√≥n, el sistema
            asignar√° autom√°ticamente una duraci√≥n de 3 horas a partir de la hora
            de inicio.
          </p>

          <div class="flex gap-x-4">
            <!-- Fecha inicio -->
            <div class="flex flex-1 gap-x-4 items-center">
              <label
                class="py-2 px-4 rounded-xl text-sm text-lilaText bg-lilaMuyClaro w-auto"
                for="start"
                >Fecha Inicio</label
              >
              <div class="flex-1">
                <input
                  formControlName="start"
                  type="date"
                  [ngClass]="{
                    'text-placeholder': !formEvent.get('start')?.value,
                    'is-invalid': submitted && formEvent.get('start')?.invalid
                  }"
                />
                @if (submitted && formEvent.get('start')?.hasError('required'))
                {
                <div class="text-[red] text-[11px] pt-2">Campo requerido</div>
                } @if (submitted && formEvent.get('start')?.hasError('minDate'))
                {
                <div class="text-[red] text-[11px] pt-2">
                  Debe ser desde 01/01/2018.
                </div>
                } @if (submitted && formEvent.get('start')?.hasError('maxDate'))
                {
                <div class="text-[red] text-[11px] pt-2">
                  Debe ser fecha m√°xima pr√≥ximo a√±o.
                </div>
                }
              </div>
            </div>

            <!-- Fecha fin -->
            <div class="flex flex-1 gap-x-4 items-center">
              <label
                class="py-2 px-4 rounded-xl text-sm text-lilaText bg-lilaMuyClaro"
                for="end"
                >Fecha Fin</label
              >
              <div class="flex-1">
                <input
                  formControlName="end"
                  type="date"
                  [ngClass]="{
                    'text-placeholder': !formEvent.get('end')?.value,
                    'is-invalid': submitted && formEvent.get('end')?.invalid
                  }"
                />
                <!-- Mensajes del control END -->
                @if (submitted && formEvent.get('end')?.hasError('minDate')) {
                <div class="text-[red] text-[11px] pt-2">
                  Debe ser desde 01/01/2018.
                </div>
                } @if (submitted && formEvent.get('end')?.hasError('maxDate')) {
                <div class="text-[red] text-[11px] pt-2">
                  Debe ser fecha m√°xima pr√≥ximo a√±o.
                </div>
                }

                <!-- Mensaje de rango (del FormGroup) -->
                @if (submitted && formEvent.hasError('invalidDateRange')) {
                <p class="text-[red] text-[11px] pt-2">
                  La fecha fin no puede ser anterior a la fecha de inicio
                </p>
                }
              </div>
            </div>

            <!-- Hora inicio -->
            <div class="flex gap-x-4 items-center">
              <label
                class="py-2 px-4 rounded-xl text-sm text-lilaText bg-lilaMuyClaro"
                for="time_start"
                >Hora Inicio</label
              >
              <div class="flex-1">
                <input
                  formControlName="time_start"
                  type="time"
                  class="w-full p-1 border rounded"
                  placeholder="00:00"
                />
              </div>
            </div>

            <!-- Hora fin -->
            <div class="flex flex-col">
              <div class="flex flex-1 gap-x-4 items-center">
                <label
                  class="py-2 px-4 rounded-xl text-sm text-lilaText bg-lilaMuyClaro"
                  for="time_end"
                  >Hora Fin</label
                >
                <div class="flex-1 flex flex-col">
                  <input
                    formControlName="time_end"
                    type="time"
                    class="w-full p-1 border rounded"
                    placeholder="00:00"
                    [ngClass]="{
                'is-invalid': submitted && formEvent.errors?.['invalidTimeRange']
              }"
                  />
                </div>
              </div>

              @if (submitted && formEvent.errors?.['invalidTimeRange']) {
              <p class="text-[red] text-[11px]">
                La hora fin no puede ser anterior a inicio
              </p>
              }
            </div>
          </div>
        </div>
        }

        <!-- Evento peri√≥dico -->
        @if (eventTypePeriod === 'periodic') {
        <div
          formArrayName="repeated_dates"
          class="flex flex-col gap-y-4 pt-8 px-4 items-center"
        >
          <app-date-array-control
            [formArray]="repeatedDates"
            [submitted]="submitted"
            (remove)="removeRepeatedDate($event)"
          ></app-date-array-control>

          @if (submitted && formEvent.errors?.['periodicNeedsAtLeastTwoDates'])
          {
          <div class="text-center">
            <p class="text-[red] text-[11px]">
              Un evento peri√≥dico debe tener al menos dos fechas. Si es solo una
              fecha pasar a evento de pase √∫nico.
            </p>
          </div>
          }

          <div class="flex justify-center">
            <app-button-icon
              [buttonText]="'A√±adir fecha'"
              [iconClass]="'uil-plus'"
              (addClicked)="addRepeatedDate()"
            ></app-button-icon>
          </div>
        </div>
        }
      </div>
      <!-- CATEGOR√çA -->
      <div class="border-2 pt-2 px-4 pb-6 mb-6">
        <h2 class="font-bold text-lilaText mt-4 uppercase">
          Categor√≠a del evento
        </h2>

        <div class="flex justify-center gap-x-4 py-2 mb-2 flex-wrap">
          @for (category of category_list; track category.code) {
          <app-button-category
            [code]="category.code"
            [buttonText]="category.label"
            [iconClass]="category.icon"
            [active]="isCategoryActive(category.code)"
            (addClicked)="toggleCategory($event)"
          />
          }
        </div>

        @if (submitted && categoryCtrl.hasError('required')) {
        <div class="text-[red] text-[11px] text-center">
          Selecciona al menos una categor√≠a
        </div>
        }
      </div>

      <!-- UBICACION -->
      <div class="border-2 pt-2 px-4 pb-6 mb-6">
        <h2 class="font-bold text-lilaText mt-4 uppercase">Ubicaci√≥n</h2>

        <div class="flex justify-center gap-x-4 py-2">
          <app-button-select
            [buttonText]="'Lugar'"
            [active]="eventTypeUbication === 'place'"
            (addClicked)="setEventTypeUbication('place')"
            iconClass="uil-map-marker"
          />
          <app-button-select
            [buttonText]="'Evento online'"
            [active]="eventTypeUbication === 'online'"
            (addClicked)="setEventTypeUbication('online')"
            iconClass="uil-presentation-play"
          />
          <app-button-select
            [buttonText]="'Por anunciar'"
            [active]="eventTypeUbication === 'pending'"
            (addClicked)="setEventTypeUbication('pending')"
            iconClass="uil-megaphone"
          />
        </div>
        <!-- üîπ Todo el bloque de ubicaci√≥n s√≥lo si NO es online -->
        @if (eventTypeUbication === 'place') {
        <div class="flex flex-col px-4 pt-6 gap-y-4">
          <!-- Provincia -->
          <div class="box-input gap-x-4 flex flex-1">
            <label for="province">Provincia</label>
            <select
              formControlName="province"
              (change)="onProvinceChange()"
              [ngClass]="{
                'is-invalid': submitted && formEvent.get('province')?.invalid,
                'text-placeholder': !formEvent.get('province')?.value
              }"
            >
              <!-- Placeholder en gris -->
              <option value="" disabled hidden>Seleccione una provincia</option>

              <!-- Opci√≥n libre -->
              <option value="">Sin provincia</option>
              @for (prov of provincias; track trackByLabel($index, prov)) {
              <option [value]="prov.label">{{ prov.label }}</option>
              }
            </select>
            @if (submitted && formEvent.get('province')?.invalid) {
            <div class="is-invalid-text">Campo requerido</div>
            }
          </div>

          <!-- Municipio -->
          <div class="box-input flex flex-1 gap-x-4">
            <label for="town">Municipio</label>
            <select
              formControlName="town"
              (change)="onTownChange()"
              [ngClass]="{
                'is-invalid': submitted && formEvent.get('town')?.invalid,
                'text-placeholder': !formEvent.get('town')?.value
              }"
            >
              <!-- Placeholder en gris -->
              <option value="" disabled hidden>Seleccione un municipio</option>

              <!-- Opci√≥n libre -->
              <option value="">Sin municipio</option>
              @for (mun of municipios; track trackByLabel($index, mun)) {
              <option [value]="mun.label">{{ mun.label }}</option>
              }
            </select>
            @if (submitted && formEvent.get('town')?.invalid) {
            <div class="is-invalid-text">Campo requerido</div>
            }
          </div>

          <!-- Espacio -->
          <div class="box-input gap-x-4">
            <label for="place">Espacio</label>
            <select formControlName="place_id" (change)="onPlaceChange()">
              <option [ngValue]="null" disabled>Selecciona un espacio</option>
              @for (place of espacios; track trackById($index, place)) {
              <option [ngValue]="place.id">{{ place.name }}</option>
              }
            </select>
          </div>

          <!-- Sala -->
          @if (salasDelLugar.length > 0) {
          <div class="box-input gap-x-4">
            <label for="sala">Sala</label>
            <select formControlName="sala_id" (change)="onSalaChange()">
              <option [ngValue]="null" disabled>Selecciona una sala</option>
              @for (sala of salasDelLugar; track trackBySalaId ($index, sala)) {
              <option [ngValue]="sala.sala_id">
                {{ sala.name }} -
                {{
                  sala.room_location
                    | filterTransformCode : "roomLocationPlaces"
                }}
              </option>
              }
            </select>
          </div>
          }

          <!-- Aforo -->
          <div class="box-input gap-y-2 gap-x-4">
            <label for="capacity">Aforo</label>
            <input formControlName="capacity" type="number" min="0" />
          </div>
        </div>
        }
        <!-- üîπ Campo para enlace online si es online -->
        @if (eventTypeUbication === 'online') {
        <div class="box-input gap-x-4 flex flex-1 items-center px-4 pt-6">
          <label for="onlineLink">Enlace del evento online</label>
          <div class="flex flex-col gap-y-2 flex-1">
            <input
              id="onlineLink"
              type="url"
              placeholder="https://..."
              formControlName="online_link"
              [ngClass]="{
                'is-invalid': submitted && formEvent.get('online_link')?.invalid
              }"
              class="w-full"
            />
            @if (submitted && formEvent.get('online_link')?.invalid) {
            <div class="is-invalid-text">Introduce un enlace v√°lido</div>
            }
          </div>
        </div>
        }
      </div>
      <!-- MACRO -->
      <div class="border-2 pt-2 px-4 pb-6 mb-6">
        <h2 class="font-bold text-lilaText mt-4 uppercase">Macroevento</h2>
        <div class="flex justify-center gap-x-4 py-2">
          <app-button-select
            [buttonText]="'No est√° dentro de un macroevento'"
            subText="Es un evento √∫nico"
            [active]="eventTypeMacro === 'SINGLE'"
            (addClicked)="setEventTypeMacro('SINGLE')"
            iconClass="uil-calendar-alt"
          /><app-button-select
            [buttonText]="'Est√° dentro de un macroevento'"
            subText="Est√° dentro de una programaci√≥n m√°s amplia"
            [active]="eventTypeMacro === 'MACRO'"
            (addClicked)="setEventTypeMacro('MACRO')"
            iconClass="uil-calendar-alt"
          />
        </div>
        <!-- macro -->
        @if (eventTypeMacro === 'MACRO') {
        <div class="pt-4 px-4">
          <p class="text-[15px] text-center mb-10 text-lilaText px-4">
            Si el macroevento al que pertenece el evento no aparece se debe
            registar previamente el macroevento desde la secci√≥n de
            MACROEVENTOS.
          </p>

          <div class="flex gap-x-8">
            <div class="box-input gap-x-4 flex flex-1">
              <label for="province">Macroevento</label>
              <div class="flex flex-col flex-1">
                <select formControlName="macroevent_id">
                  <option [ngValue]="null">Seleccione un macroevento</option>
                  @for (macro of macroevents; track macro) {
                  <option [ngValue]="macro.id">
                    {{ macro.title }} - {{ macro.start | date : "yyyy" }}
                  </option>
                  }
                </select>

                @if (formEvent.controls.macroevent_id.disabled) {
                <div>
                  <small class="text-gray-500 italic">
                    Selecciona una fecha de inicio para habilitar los
                    macroeventos de ese a√±o
                  </small>
                </div>
                }
              </div>
            </div>
          </div>
        </div>
        }
      </div>
      <!-- PROYECTO -->
      <div class="border-2 pt-2 px-4 pb-6 mb-6">
        <h2 class="font-bold text-lilaText mt-4 uppercase">Proyecto</h2>
        <div class="flex justify-center gap-x-4 py-2">
          <app-button-select
            [buttonText]="'No est√° dentro de un proyecto'"
            subText="Es un evento √∫nico"
            [active]="eventTypeProject === 'NO_PROJECT'"
            (addClicked)="setEventTypeProject('NO_PROJECT')"
            iconClass="uil-calendar-alt"
          /><app-button-select
            [buttonText]="'Est√° dentro de un proyecto'"
            subText="Est√° dentro de una programaci√≥n m√°s amplia"
            [active]="eventTypeProject === 'PROJECT'"
            (addClicked)="setEventTypeProject('PROJECT')"
            iconClass="uil-calendar-alt"
          />
        </div>
        @if (eventTypeProject === 'PROJECT') {
        <div class="pt-4 px-4">
          <p class="text-[15px] text-center mb-10 text-lilaText px-4">
            Si el proyecto al que pertenece el evento no aparece se debe
            registrar previamente el proyecto desde la secci√≥n de PROYECTOS.
          </p>

          <div class="flex gap-x-8">
            <div class="box-input gap-x-4 flex flex-1">
              <label for="province">Proyecto</label>
              <div class="flex flex-col flex-1">
                <select formControlName="project_id">
                  <option [ngValue]="null">
                    Seleccione una subvenci√≥n si el proyecto pertenece a alguna
                  </option>
                  @for (project of projects; track project) {
                  <option [value]="project.id">
                    {{ project.title }} - {{ project.year }}
                  </option>
                  }
                </select>

                @if (formEvent.controls.project_id.disabled) {
                <div>
                  <small class="text-gray-500 italic">
                    Selecciona una fecha de inicio para habilitar los proyectos
                    de ese a√±o
                  </small>
                </div>
                }
              </div>
            </div>
          </div>
        </div>
        }
      </div>
      <!-- ADMISI√ìN -->
      <div class="border-2 pt-2 px-4 pb-6 mb-6">
        <h2 class="font-bold text-lilaText mt-4 uppercase">Admisi√≥n</h2>
        <div class="flex justify-center gap-x-4 py-2">
          <app-button-select
            [buttonText]="'Evento gratuito'"
            [active]="eventTypeAccess === 'FREE'"
            (addClicked)="setEventTypeAccess('FREE')"
            iconClass="uil-social-distancing"
          />
          <app-button-select
            [buttonText]="'Evento de pago'"
            [active]="eventTypeAccess === 'TICKETS'"
            (addClicked)="setEventTypeAccess('TICKETS')"
            iconClass="uil-ticket"
          /><app-button-select
            [buttonText]="'Por determinar'"
            [active]="eventTypeAccess === 'UNSPECIFIED'"
            (addClicked)="setEventTypeAccess('UNSPECIFIED')"
            iconClass="uil-question-circle"
          />
        </div>
        @if (eventTypeAccess === 'TICKETS') {
        <div class="pt-4 px-4">
          <p class="text-[15px] text-center mb-10 text-lilaText px-4">
            Si el evento requiere de variedad de entradas, a√±ade las diferentes
            categor√≠as de p√∫blico que mejor se adapten a tu evento (adultxs,
            ni√±xs, jubiladxs, socixs‚Ä¶) y especifica su precio. Para categor√≠as
            gratuitas, introduce 0 como precio.
          </p>
          <div formArrayName="ticket_prices">
            @for (group of ticketPrices.controls; track $index; let i = $index)
            {
            <div [formGroupName]="i" class="box-input gap-x-4 pb-4">
              <label
                class="py-2 px-4 rounded-xl text-sm text-lilaText bg-lilaMuyClaro"
              >
                Tipo
              </label>
              <input
                formControlName="type"
                type="text"
                placeholder="Adultx, pubertx..."
              />
              <label
                class="py-2 px-4 rounded-xl text-sm text-lilaText bg-lilaMuyClaro"
              >
                Precio
              </label>
              <input formControlName="price" type="number" placeholder="‚Ç¨" />
              <button
                type="button"
                (click)="removeTicketPrice(i)"
                class="btn-danger"
              >
                Eliminar
              </button>
            </div>
            }
          </div>
          <div class="mb-4 flex gap-x-4 justify-start">
            <app-button-icon
              [buttonText]="'A√±adir precio'"
              [iconClass]="'uil-plus'"
              (addClicked)="addTicketPrice()"
            ></app-button-icon>
          </div>
        </div>
        }
      </div>
      @if (eventTypeAccess !== 'TICKETS' ) {
      <div class="border-2 pt-2 px-4 pb-6 mb-6">
        <h2 class="font-bold text-lilaText mt-4 uppercase">Inscripci√≥n</h2>
        <div class="flex justify-center gap-x-4 py-2">
          <app-button-select
            [buttonText]="'Acceso ilimitado'"
            [active]="eventTypeInscription === 'unlimited'"
            (addClicked)="setEventTypeInscription('unlimited')"
            iconClass="uil-border-clear"
          /><app-button-select
            [buttonText]="'Requiere inscripci√≥n previa'"
            [active]="eventTypeInscription === 'inscription'"
            (addClicked)="setEventTypeInscription('inscription')"
            iconClass="uil-clipboard-notes"
          />
        </div>
        @if (eventTypeInscription === 'inscription') {
        <div class="box-input gap-x-4 pt-4 px-4">
          <label for="inscription_method">Medio de registro</label>
          <quill-editor
            formControlName="inscription_method"
            [modules]="quillModules"
            placeholder="Escribe aqu√≠..."
            class="ql-container-small flex-1 text-sm focus:outline-none focus:ring focus:ring-blue-200"
          />
        </div>
        }
      </div>
      } @if (eventTypeAccess === 'TICKETS') {
      <div class="border-2 pt-2 px-4 pb-6 mb-6">
        <h2 class="font-bold text-lilaText mt-4 uppercase">
          Adquirir reserva / entrada
        </h2>

        <div class="box-input gap-x-4 pt-4 px-4">
          <label for="inscription_method">¬øC√≥mo hacerlo?</label>
          <quill-editor
            formControlName="tickets_method"
            [modules]="quillModules"
            placeholder="Escribe aqu√≠..."
            class="ql-container-small flex-1 text-sm focus:outline-none focus:ring focus:ring-blue-200"
          />
        </div>
      </div>
      }
      <!-- CAMBIOS -->
      <div class="border-2 pt-2 px-4 pb-6 mb-6">
        <h2 class="font-bold text-lilaText mt-4 uppercase">
          Estado del evento
        </h2>

        <div class="flex justify-center gap-x-4 py-2 mb-6">
          <app-button-select
            [buttonText]="'En curso'"
            subText="Todo sigue seg√∫n lo provisto"
            [active]="eventTypeStatus === enumStatusEvent.EJECUCION"
            (addClicked)="setEventTypeStatus(enumStatusEvent.EJECUCION)"
            iconClass="uil-check-square"
          />
          <app-button-select
            [buttonText]="'Cancelado'"
            subText="No se puede llevar a cabo"
            [active]="eventTypeStatus === enumStatusEvent.CANCELADO"
            (addClicked)="setEventTypeStatus(enumStatusEvent.CANCELADO)"
            iconClass="uil-time_starts-circle"
          /><app-button-select
            [buttonText]="'Aplazado'"
            subText="Se postpone para otra fecha"
            [active]="eventTypeStatus === enumStatusEvent.APLAZADO"
            (addClicked)="setEventTypeStatus(enumStatusEvent.APLAZADO)"
            iconClass="uil-calendar-slash"
          /><app-button-select
            [buttonText]="'Agotado'"
            subText="No hay m√°s aforo disponible"
            [active]="eventTypeStatus === enumStatusEvent.AGOTADO"
            (addClicked)="setEventTypeStatus(enumStatusEvent.AGOTADO)"
            iconClass="uil-exclamation-circle"
          />
        </div>

        @if (eventTypeStatus !== enumStatusEvent.EJECUCION) {
        <div class="box-input gap-x-4 pt-4">
          <label for="status_reason">Motivos <br />cambio</label>
          <quill-editor
            formControlName="status_reason"
            [modules]="quillModules"
            placeholder="Escribe aqu√≠..."
            class="ql-container-small flex-1 text-sm focus:outline-none focus:ring focus:ring-blue-200"
          />
        </div>
        }
      </div>
      <!-- GESTI√ìN -->
      <div class="border-2 pt-2 px-4 pb-6 mb-6">
        <h2 class="font-bold text-lilaText mt-4 uppercase">Gesti√≥n</h2>
        <!-- ORGANIZADORES -->
        <div class="pt-6">
          <!-- BOTONES -->
          <div class="mb-10 flex gap-x-4 justify-center">
            <app-button-icon
              [buttonText]="'A√±adir organizador'"
              [iconClass]="'uil-plus'"
              (addClicked)="addOrganizer()"
            ></app-button-icon>
            <app-button-icon
              [buttonText]="'A√±adir colaborador'"
              [iconClass]="'uil-plus'"
              (addClicked)="addCollaborator()"
            ></app-button-icon>
            <app-button-icon
              [buttonText]="'A√±adir patrocinador'"
              [iconClass]="'uil-plus'"
              (addClicked)="addSponsor()"
            ></app-button-icon>
          </div>
        </div>

        <!-- ORGANIZADORES -->
        @if (showOrganizers) {
        <app-agent-array-control
          [formArray]="organizers"
          [agents]="agents"
          [label]="'Organizador'"
          (remove)="removeOrganizer($event)"
        ></app-agent-array-control>
        } @if (showCollaborators) {
        <app-agent-array-control
          [formArray]="collaborators"
          [agents]="agents"
          [label]="'Colaborador'"
          (remove)="removeCollaborator($event)"
        ></app-agent-array-control>
        } @if (showSponsors) {
        <app-agent-array-control
          [formArray]="sponsors"
          [agents]="agents"
          [label]="'Patrocinador'"
          (remove)="removeSponsor($event)"
        ></app-agent-array-control>
        }
      </div>
      @if (formEvent.invalid && submitted) {
      <div class="flex justify-center">
        <div class="error">Hay alg√∫n campo incorrecto</div>
      </div>
      }
      <div class="flex justify-center">
        <button class="bg-black p-4 text-white" type="submit">
          {{ buttonAction }}
        </button>
      </div>
    </div>
  </form>
  }
</div>
