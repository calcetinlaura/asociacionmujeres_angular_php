<div>
  <div class="text-center">
    <div
      class="inline-block border-b border-[#1C1C3A] pb-4 mb-4 md:pb-4 md:mb-8"
    >
      <app-text-title [text]="item!.title" />
      <div class="flex flex-col sm:flex-row gap-4 my-4">
        @if (datesEquals) { @if (item!.start) {
        <app-text-subtitle
          [text]="
            item!.start | date : 'EEEE dd MMMM' : '' : 'es-ES' | titlecase
          "
        ></app-text-subtitle>
        } } @else { @if (item!.start && item!.end) {
        <app-text-subtitle
          [text]="
            (item!.start | date : 'EEEE dd MMMM ' : '' : 'es-ES' | titlecase) +
            ' - ' +
            (item!.end | date : 'EEEE dd MMMM yyyy ' : '' : 'es-ES' | titlecase)
          "
        ></app-text-subtitle>
        } }
      </div>
      <app-social-media-share
        [url]="
          'https://asociaciondemujerescallosadesegura.com/macroevents/' +
          item!.id
        "
        [title]="item!.title"
      ></app-social-media-share>
    </div>
  </div>
  <div class="flex flex-col-reverse gap-y-8 lg:flex-row lg:gap-x-24 lg:gap-y-0">
    <div class="lg:w-2/5">
      <img
        appImgBroken
        [src]="(item!.img ? item!.img : '') | itemImage : typeModal"
        [alt]="item!.title"
        class="imagen"
      />
    </div>
    <div class="flex flex-col justify-between lg:w-3/5">
      <div>
        <div>
          @if (item!.town) {
          <p class="font-bold text-[14px]">{{ item!.town }}</p>
          } @if (item!.description) {
          <app-text-editor [text]="item!.description"></app-text-editor>
          }
        </div>
        @if (item!.events && item!.events.length > 0) {
        <div class="mt-6 flex flex-1">
          <div class="flex flex-col gap-1 mt-2 w-full">
            @for (event of item!.events; track event) {
            <div
              class="group flex w-full gap-4 cursor-pointer rounded-xl p-2 border border-transparent transition-all duration-300 ease-out hover:-translate-y-0.5 hover:shadow-md hover:border-lilaOscuro/15 hover:bg-lilaClaro/20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lilaOscuro/40"
              (click)="onOpenEvent(event.id)"
              tabindex="0"
              (keyup.enter)="onOpenEvent(event.id)"
            >
              <div class="w-24 h-32 overflow-hidden flex-shrink-0 rounded-lg">
                @if (event.img) {
                <img
                  [src]="event.img | itemImage : typeEvent"
                  [alt]="event.title"
                  class="object-cover w-full h-full transition-transform duration-300 ease-out group-hover:scale-[1.03]"
                />
                }
              </div>

              <div
                class="flex-1 p-3 rounded-lg shadow-sm bg-white/70 transition-all duration-300 ease-out group-hover:bg-white group-hover:shadow-md"
              >
                <p class="text-[12px] font-semibold tracking-wide">
                  {{ event.title }}
                </p>

                @if (event.start) {
                <p class="text-[12px] text-gray-600 mt-1">
                  {{
                    event.start
                      | date : "EEEE dd MMMM" : "" : "es-ES"
                      | titlecase
                  }}
                  | {{ event.time_start?.slice(0, 5) }}h
                </p>
                } @if (event.placeData?.name) {
                <p class="text-[12px] text-gray-600 pt-4">
                  {{ event.placeData?.name }}
                </p>
                } @if (event.town) {
                <p class="text-[12px] text-gray-600">
                  @if (event.placeData?.address) {
                  <span>{{ event.placeData?.address }}, </span> }
                  {{ event.town }}
                </p>
                }
              </div>
            </div>
            }
          </div>
        </div>
        }
      </div>
    </div>
  </div>
</div>
