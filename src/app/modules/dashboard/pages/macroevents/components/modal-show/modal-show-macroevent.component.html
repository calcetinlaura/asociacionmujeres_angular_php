<!-- modal-show-macroevent.component.html -->
<div class="p-4">
  <!-- SKELETON mientras carga o si aÃºn no hay item -->
  @if (!item || item.loading) {
  <div class="animate-pulse space-y-4">
    <div class="h-6 w-2/3 bg-gray-200 rounded"></div>
    <div class="h-4 w-1/2 bg-gray-200 rounded"></div>
    <div class="h-48 w-full bg-gray-200 rounded"></div>
    <div class="h-4 w-full bg-gray-200 rounded"></div>
    <div class="h-4 w-5/6 bg-gray-200 rounded"></div>
  </div>
  } @else {
  <div>
    <div class="text-center">
      <div
        class="inline-block border-b border-[#1C1C3A] pb-4 mb-4 md:pb-4 md:mb-8"
      >
        <app-text-title [text]="item.title || 'Macroevento'" />
        <div class="flex flex-col sm:flex-row gap-4 my-4">
          @if (datesEquals) { @if (item.start) {
          <app-text-subtitle
            [text]="
              item.start | date : 'EEEE dd MMMM' : '' : 'es-ES' | titlecase
            "
          >
          </app-text-subtitle>
          } } @else { @if (item.start && item.end) {
          <app-text-subtitle
            [text]="
              (item.start | date : 'EEEE dd MMM' : '' : 'es-ES' | titlecase) +
              ' - ' +
              (item.end | date : 'EEEE dd MMM yyyy' : '' : 'es-ES' | titlecase)
            "
          >
          </app-text-subtitle>
          } }
        </div>
        @if (!isDashboard) {
        <app-social-media-share [url]="shareUrl" [title]="shareTitle" />
        }
      </div>
    </div>

    <div
      class="flex flex-col-reverse gap-y-8 lg:flex-row lg:gap-x-24 lg:gap-y-0"
    >
      <div class="lg:w-2/5">
        @if (item.img) {
        <img
          appImgBroken
          loading="lazy"
          decoding="async"
          [src]="item.img || '' | itemImage : typeModal"
          [alt]="item.title || ''"
          class="imagen"
          (click)="openZoom()"
        />
        }
      </div>

      <div class="flex flex-col justify-between lg:w-3/5">
        <div>
          @if (item.description) {
          <app-text-editor [text]="item.description"></app-text-editor>
          } @if ((item.events?.length ?? 0) > 0) {
          <div class="mt-6 flex flex-1">
            <div class="flex flex-col gap-1 mt-2 w-full">
              @for (event of filteredEvents; track trackById($index, event)) {
              <app-card-events-mini
                [event]="event"
                [isDashboard]="isDashboard"
                [showButtonsActions]="false"
                (openEvent)="onOpenEvent($event)"
              />
              }
            </div>
          </div>
          }
        </div>
      </div>
    </div>
  </div>
  }
</div>

@if (showZoom) {
<app-image-zoom-overlay
  [open]="showZoom"
  [src]="item?.img || '' | itemImage : typeModal"
  [alt]="item?.title || ''"
  [maxScale]="5"
  [minScale]="1"
  [caption]="item?.title || ''"
  (closed)="closeZoom()"
></app-image-zoom-overlay>
}
